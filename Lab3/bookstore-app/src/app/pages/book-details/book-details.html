

<div class="container py-5 detail-page-animation">
  
  <div class="mb-4">
    <a routerLink="/products" class="btn btn-outline-gold">
      <i class="bi bi-arrow-left me-2"></i> Back to Library
    </a>
  </div>

  @if (!selectedBook) {
    <div class="text-center py-5">
      <div class="spinner-border text-gold" role="status"></div>
      <p class="text-gold mt-3">Fetching book details from the archives...</p>
    </div>
  }

  @else {
    <div class="row vintage-detail-card shadow-lg rounded-4 overflow-hidden border-0">
      
      <div class="col-md-5 d-flex align-items-center justify-content-center p-5 img-container">
        <img [src]="selectedBook.thumbnail" class="img-fluid rounded shadow-lg book-img" [alt]="selectedBook.title">
      </div>

      <div class="col-md-7 p-5 text-content text-white">
        <h1 class="display-4 fw-bold mb-2 title-gold">{{ selectedBook.title }}</h1>
        <p class="h4 italic mb-4 author-name">By {{ selectedBook.author }}</p>
        
        <div class="mb-4">
          <span class="badge category-badge">Category: {{ selectedBook.category }}</span>
          <span class="ms-3 rating-gold">{{ selectedBook.rating }} â˜…</span>
          <span class="ms-3 text-muted small">Available Stock: {{ selectedBook.stock }}</span>
        </div>

        <hr class="divider">
        <p class="description-text">{{ selectedBook.description }}</p>

        <div class="d-flex align-items-center gap-3 mb-5 mt-4">
          <span class="price-big">
            {{ selectedBook.price | discount: selectedBook.discountPercentage }} EGP
          </span>
          @if (selectedBook.discountPercentage > 0) {
            <span class="old-price-text text-decoration-line-through text-muted ms-2"  class="old-price-text">
              {{ selectedBook.price }} EGP
            </span>
          }
        </div>

        <button class="btn btn-add-vintage px-5 py-3 shadow" 
                (click)="addToCart()" 
                [disabled]="selectedBook.stock === 0">
          <i class="bi bi-cart-plus me-2"></i> 
          {{ selectedBook.stock > 0 ? 'Add to Cart' : 'Temporarily Out of Stock' }}
        </button>
      </div>
    </div>
  }
</div>